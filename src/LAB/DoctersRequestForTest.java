/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package LAB;
import java.awt.Toolkit;
import java.awt.event.WindowEvent;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
/**
 *
 * @author SACHI
 */
public class DoctersRequestForTest extends javax.swing.JFrame {
Connection conn= null;
    ResultSet rs=null;
    PreparedStatement pst=null;
    /**
     * Creates new form Add
     */
    public DoctersRequestForTest() {
        initComponents();
     conn=DBaccess.ConnectDb();
     addCombobox1();
    }
     void addCombobox1(){
    Test_combo.addItem("Scan");
   Test_combo.addItem("Blood");
   Test_combo.addItem("MRI");
    Test_combo.addItem("X-Ray");
    Test_combo.addItem("Urine");
    Test_combo.addItem("Full Body Ceckup");
    
   
}
public void close(){
        WindowEvent winClosingEvent= new WindowEvent(this,WindowEvent.WINDOW_CLOSING);
         Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(winClosingEvent);
 }
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();
        jLabel7 = new javax.swing.JLabel();
        EmpName = new javax.swing.JTextField();
        EmpID = new javax.swing.JTextField();
        searchInfo = new javax.swing.JButton();
        Patient_type = new javax.swing.JComboBox();
        jLabel6 = new javax.swing.JLabel();
        Save = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        Text1 = new javax.swing.JTextField();
        Text2 = new javax.swing.JTextField();
        Test_combo = new javax.swing.JComboBox();
        Text_info = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        date1 = new com.toedter.calendar.JDateChooser();
        jButton6 = new javax.swing.JButton();
        jLabel29 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setUndecorated(true);

        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jButton1.setText("Get Name");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jPanel1.add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 280, 90, -1));

        jLabel7.setText("Approver");
        jPanel1.add(jLabel7, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 280, 60, 20));
        jPanel1.add(EmpName, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 310, 210, -1));
        jPanel1.add(EmpID, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 280, 110, 20));

        searchInfo.setText("Search");
        searchInfo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                searchInfoActionPerformed(evt);
            }
        });
        jPanel1.add(searchInfo, new org.netbeans.lib.awtextra.AbsoluteConstraints(350, 50, -1, -1));

        Patient_type.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "IPD", "OPD" }));
        jPanel1.add(Patient_type, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 120, 210, -1));

        jLabel6.setText("Patient Type");
        jPanel1.add(jLabel6, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 120, -1, -1));

        Save.setText("Send");
        Save.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                SaveActionPerformed(evt);
            }
        });
        jPanel1.add(Save, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 370, 92, -1));

        jLabel1.setText("Patient ID");
        jPanel1.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 50, -1, -1));

        jLabel2.setText("Patient Name");
        jPanel1.add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 90, -1, -1));

        jLabel3.setText("Date For Test");
        jPanel1.add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(36, 160, -1, -1));

        jLabel4.setText("Test Type");
        jPanel1.add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(36, 202, -1, -1));

        Text1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                Text1ActionPerformed(evt);
            }
        });
        jPanel1.add(Text1, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 50, 210, -1));
        jPanel1.add(Text2, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 80, 210, -1));

        jPanel1.add(Test_combo, new org.netbeans.lib.awtextra.AbsoluteConstraints(129, 199, 210, -1));
        jPanel1.add(Text_info, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 240, 210, -1));

        jLabel5.setText("Test Info");
        jPanel1.add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 250, -1, -1));

        date1.setDateFormatString("yyyy-MM-dd");
        jPanel1.add(date1, new org.netbeans.lib.awtextra.AbsoluteConstraints(129, 154, 210, -1));

        jButton6.setBackground(new java.awt.Color(0, 102, 204));
        jButton6.setForeground(new java.awt.Color(255, 255, 255));
        jButton6.setText("X");
        jButton6.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton6ActionPerformed(evt);
            }
        });
        jPanel1.add(jButton6, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 10, -1, -1));

        jLabel29.setIcon(new javax.swing.ImageIcon(getClass().getResource("/test2/images/back (2).jpg"))); // NOI18N
        jLabel29.setText("jLabel28");
        jPanel1.add(jLabel29, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, -10, 440, 430));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 439, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void Text1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_Text1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_Text1ActionPerformed

    private void SaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_SaveActionPerformed
    try{
            String sql="Insert into addinfo(Patient_ID,Patient_Name,Patient_Type,Test_Date,Test_Type,Test_Info,Approver) value(?,?,?,?,?,?,?) ";
            pst=conn.prepareStatement(sql);
            pst.setString(1,Text1.getText());
            pst.setString(2,Text2.getText());
            pst.setString(3,Patient_type.getSelectedItem().toString());
            pst.setString(4,((JTextField)date1.getDateEditor().getUiComponent()).getText());
            pst.setString(5,Test_combo.getSelectedItem().toString());
            pst.setString(6,Text_info.getText());
            pst.setString(7,EmpName.getText());
            
            pst.execute();
            JOptionPane.showMessageDialog(null,"Saved");
            Text1.setText("");
            Text2.setText("");
            ((JTextField)date1.getDateEditor().getUiComponent()).setText("");
            Test_combo.setSelectedIndex(0);
            Patient_type.setSelectedIndex(0);
            Text_info.setText("");
            EmpID.setText("");
            EmpName.setText("");
          }catch(Exception e){
          JOptionPane.showMessageDialog(null, "Please Fill the Form ");
         
                 
    }//GEN-LAST:event_SaveActionPerformed
    }
    private void searchInfoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_searchInfoActionPerformed
         String pid=Text1.getText();
         String sql="select pid,name from p2 where pid LIKE '%"+pid+"%'";
         
         try{
          pst=conn.prepareStatement(sql);
            rs = pst.executeQuery();
            while(rs.next()){
                
                Text2.setText(rs.getString("name"));
                
            }
           
         
         }catch(Exception e){
             JOptionPane.showMessageDialog(null,"PID is not valide");
             
             
         }
    }//GEN-LAST:event_searchInfoActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
         String Empid=EmpID.getText();
        
        String sql="select Employee_Id,Employee_Name from add_staff where Employee_Id LIKE '%"+Empid+"%'";
        try {
            pst=conn.prepareStatement(sql);
            rs = pst.executeQuery();
           while(rs.next()){
                
                EmpName.setText(rs.getString("Employee_Name"));
                
            }
          
          
          
        } catch (SQLException ex) {
          JOptionPane.showMessageDialog(null,"ID is not valide");
        }
    }//GEN-LAST:event_jButton1ActionPerformed

    private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton6ActionPerformed

        this.dispose();

        // TODO add your handling code here:
    }//GEN-LAST:event_jButton6ActionPerformed
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(DoctersRequestForTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(DoctersRequestForTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(DoctersRequestForTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(DoctersRequestForTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new DoctersRequestForTest().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField EmpID;
    private javax.swing.JTextField EmpName;
    private javax.swing.JComboBox Patient_type;
    private javax.swing.JButton Save;
    private javax.swing.JComboBox Test_combo;
    private javax.swing.JTextField Text1;
    private javax.swing.JTextField Text2;
    private javax.swing.JTextField Text_info;
    private com.toedter.calendar.JDateChooser date1;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton6;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel29;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JButton searchInfo;
    // End of variables declaration//GEN-END:variables
}
